(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const t of a.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&o(t)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();class A{constructor(s,n){this.initial=Number(s),this.remaining=Number(n)}toJSON(){return{initial:this.initial,remaining:this.remaining}}}const j="Buget-App",H=1,h={db:null},P=async()=>new Promise((e,s)=>{const n=indexedDB.open(j,H);n.onupgradeneeded=o=>{const i=o.target.result,a=i.createObjectStore("expenses",{keyPath:"id",autoIncrement:!1});a.createIndex("name","name",{unique:!1}),a.createIndex("amount","amount",{unique:!1}),a.createIndex("date","date",{unique:!1});const t=i.createObjectStore("budget",{keyPath:"id",autoIncrement:!0});t.createIndex("initial","initial",{unique:!0}),t.createIndex("remaining","remaining",{unique:!1})},n.onsuccess=o=>{h.db=o.target.result,e(h.db)},n.onerror=()=>{s("Error al abrir la base de datos")}}),V=async()=>{if(!h.db){console.error("La base de datos no est√° abierta.");return}const n=h.db.transaction("budget","readonly").objectStore("budget").get(1);return new Promise((o,i)=>{n.onsuccess=a=>{o(a.target.result||!1)},n.onerror=a=>{i("No se pudo obtener el presupuesto")}})},R=async e=>new Promise((s,n)=>{if(!h.db){n("La base de datos no est√° abierta.");return}const o=h.db.transaction("budget","readwrite"),i=o.objectStore("budget"),a=i.get(1);a.onsuccess=()=>{const t=a.result;if(t){t.remaining=e.remaining;const r=i.put(t);r.onsuccess=()=>console.log("Presupuesto actualizado correctamente."),r.onerror=()=>n("Error al actualizar el presupuesto.")}else{e.id=1;const r=i.add(e);r.onsuccess=()=>console.log("Presupuesto agregado correctamente."),r.onerror=()=>n("Error al agregar el presupuesto.")}},a.onerror=()=>n("No se pudo obtener el presupuesto"),o.oncomplete=()=>{console.log("Transacci√≥n completada con √©xito."),s("Operaci√≥n realizada con √©xito")},o.onerror=()=>n("Error en la transacci√≥n")}),U=async e=>new Promise((s,n)=>{const a=h.db.transaction("expenses","readwrite").objectStore("expenses").add(e);a.onsuccess=()=>{s("Gasto agregado correctamente")},a.onerror=t=>{n("No se pudo agregar el gasto")}}),F=async(e,s)=>new Promise((n,o)=>{const a=h.db.transaction("expenses","readwrite").objectStore("expenses"),t=a.get(e);t.onsuccess=r=>{const g=r.target.result;if(g){const u={...g,...s},d=a.put(u);d.onsuccess=()=>n("Gasto actualizado correctamente"),d.onerror=c=>o("No se pudo actualizar el gasto")}else o("Gasto no encontrado")},t.onerror=r=>{o("Error al obtener el gasto para actualizar")}}),z=e=>new Promise((s,n)=>{const a=h.db.transaction("expenses","readwrite").objectStore("expenses").delete(e);a.onsuccess=()=>{s("Gasto eliminado correctamente")},a.onerror=t=>{n("No se pudo eliminar el gasto")}}),$=async()=>new Promise((e,s)=>{const i=h.db.transaction("expenses","readonly").objectStore("expenses").getAll();i.onsuccess=a=>{e(a.target.result)},i.onerror=a=>{console.error("Error al obtener los gastos",a),s("No se pudieron obtener los gastos")}}),G=()=>new Promise((e,s)=>{const n=indexedDB.deleteDatabase(j);n.onsuccess=()=>{e("Base de datos eliminada correctamente")},n.onerror=o=>{s("No se pudo eliminar la base de datos")},n.onblocked=()=>{window.location.reload()}}),W=async e=>{if(h.db||await P(),!h.db)return!1;const o=h.db.transaction("expenses","readonly").objectStore("expenses").get(e);return new Promise((i,a)=>{o.onsuccess=t=>{i(t.target.result||!1)},o.onerror=()=>{a("No se pudo obtener el presupuesto")}})},v={openDB:P,getBudgetDB:V,saveBudgetDB:R,saveExpenseDB:U,udateExpenseDB:F,deleteExpenseDB:z,getAllExpensesDB:$,getExpenseDB:W,deleteDatabase:G},f=[];for(let e=0;e<256;++e)f.push((e+256).toString(16).slice(1));function J(e,s=0){return(f[e[s+0]]+f[e[s+1]]+f[e[s+2]]+f[e[s+3]]+"-"+f[e[s+4]]+f[e[s+5]]+"-"+f[e[s+6]]+f[e[s+7]]+"-"+f[e[s+8]]+f[e[s+9]]+"-"+f[e[s+10]]+f[e[s+11]]+f[e[s+12]]+f[e[s+13]]+f[e[s+14]]+f[e[s+15]]).toLowerCase()}let T;const X=new Uint8Array(16);function K(){if(!T){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");T=crypto.getRandomValues.bind(crypto)}return T(X)}const Q=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M={randomUUID:Q};function Y(e,s,n){var i;if(M.randomUUID&&!e)return M.randomUUID();e=e||{};const o=e.random??((i=e.rng)==null?void 0:i.call(e))??K();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,J(o)}class Z{constructor(s,n,o){this.name=s,this.amount=Number(n),this.date=o,this.id=Y()}toJSON(){return{id:this.id,name:this.name,amount:this.amount,date:this.date}}}function ee(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */var te=N.exports,O;function se(){return O||(O=1,function(e){(function(s,n){e.exports?e.exports=n():s.Toastify=n()})(te,function(s){var n=function(t){return new n.lib.init(t)},o="1.12.0";n.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},n.lib=n.prototype={toastify:o,constructor:n,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||n.defaults.text,this.options.node=t.node||n.defaults.node,this.options.duration=t.duration===0?0:t.duration||n.defaults.duration,this.options.selector=t.selector||n.defaults.selector,this.options.callback=t.callback||n.defaults.callback,this.options.destination=t.destination||n.defaults.destination,this.options.newWindow=t.newWindow||n.defaults.newWindow,this.options.close=t.close||n.defaults.close,this.options.gravity=t.gravity==="bottom"?"toastify-bottom":n.defaults.gravity,this.options.positionLeft=t.positionLeft||n.defaults.positionLeft,this.options.position=t.position||n.defaults.position,this.options.backgroundColor=t.backgroundColor||n.defaults.backgroundColor,this.options.avatar=t.avatar||n.defaults.avatar,this.options.className=t.className||n.defaults.className,this.options.stopOnFocus=t.stopOnFocus===void 0?n.defaults.stopOnFocus:t.stopOnFocus,this.options.onClick=t.onClick||n.defaults.onClick,this.options.offset=t.offset||n.defaults.offset,this.options.escapeMarkup=t.escapeMarkup!==void 0?t.escapeMarkup:n.defaults.escapeMarkup,this.options.ariaLive=t.ariaLive||n.defaults.ariaLive,this.options.style=t.style||n.defaults.style,t.backgroundColor&&(this.options.style.background=t.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var t=document.createElement("div");t.className="toastify on "+this.options.className,this.options.position?t.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(t.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):t.className+=" toastify-right",t.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var r in this.options.style)t.style[r]=this.options.style[r];if(this.options.ariaLive&&t.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)t.appendChild(this.options.node);else if(this.options.escapeMarkup?t.innerText=this.options.text:t.innerHTML=this.options.text,this.options.avatar!==""){var g=document.createElement("img");g.src=this.options.avatar,g.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?t.appendChild(g):t.insertAdjacentElement("afterbegin",g)}if(this.options.close===!0){var u=document.createElement("button");u.type="button",u.setAttribute("aria-label","Close"),u.className="toast-close",u.innerHTML="&#10006;",u.addEventListener("click",(function(E){E.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var d=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&d>360?t.insertAdjacentElement("afterbegin",u):t.appendChild(u)}if(this.options.stopOnFocus&&this.options.duration>0){var c=this;t.addEventListener("mouseover",function(E){window.clearTimeout(t.timeOutValue)}),t.addEventListener("mouseleave",function(){t.timeOutValue=window.setTimeout(function(){c.removeElement(t)},c.options.duration)})}if(typeof this.options.destination<"u"&&t.addEventListener("click",(function(E){E.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&t.addEventListener("click",(function(E){E.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var l=i("x",this.options),b=i("y",this.options),_=this.options.position=="left"?l:"-"+l,S=this.options.gravity=="toastify-top"?b:"-"+b;t.style.transform="translate("+_+","+S+")"}return t},showToast:function(){this.toastElement=this.buildToast();var t;if(typeof this.options.selector=="string"?t=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?t=this.options.selector:t=document.body,!t)throw"Root element is not defined";var r=n.defaults.oldestFirst?t.firstChild:t.lastChild;return t.insertBefore(this.toastElement,r),n.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),n.reposition()}).bind(this),400)}},n.reposition=function(){for(var t={top:15,bottom:15},r={top:15,bottom:15},g={top:15,bottom:15},u=document.getElementsByClassName("toastify"),d,c=0;c<u.length;c++){a(u[c],"toastify-top")===!0?d="toastify-top":d="toastify-bottom";var l=u[c].offsetHeight;d=d.substr(9,d.length-1);var b=15,_=window.innerWidth>0?window.innerWidth:screen.width;_<=360?(u[c].style[d]=g[d]+"px",g[d]+=l+b):a(u[c],"toastify-left")===!0?(u[c].style[d]=t[d]+"px",t[d]+=l+b):(u[c].style[d]=r[d]+"px",r[d]+=l+b)}return this};function i(t,r){return r.offset[t]?isNaN(r.offset[t])?r.offset[t]:r.offset[t]+"px":"0px"}function a(t,r){return!t||typeof r!="string"?!1:!!(t.className&&t.className.trim().split(/\s+/gi).indexOf(r)>-1)}return n.lib.init.prototype=n.lib,n})}(N)),N.exports}var ne=se();const oe=ee(ne);let ae=1,q=0;const m=(e,s)=>{q<ae&&(q++,oe({text:e,duration:1e3,close:!0,gravity:"top",position:"right",style:{boxShadow:"none",background:s==="success"?"#009933":"#cc0000",color:"white"}}).showToast(),setTimeout(()=>{q--},2e3))},p={expenses:[],budget:{initial:0,remaining:0}},ie=async()=>{await v.openDB()},re=async()=>{try{const[e,s]=await Promise.all([v.getBudgetDB(),v.getAllExpensesDB()]);return!e||e&&!s?!1:(Object.assign(p,{budget:{initial:e.initial,remaining:e.remaining},expenses:s.map(({id:n,name:o,amount:i,date:a})=>({id:n,name:o,amount:i,date:a}))}),!0)}catch(e){return console.error("Error al cargar los datos desde IndexedDB:",e.message),!1}},ce=async e=>{const s=new A(e,e);return p.budget.initial=s.initial,p.budget.remaining=s.remaining,console.log(p.budget),await v.saveBudgetDB(p.budget),m("A√±adido correctamente","success"),!0},de=async(e,s,n)=>{if(s>p.budget.remaining)return m("No tienes suficiente presupuesto","error");const o=new Z(e,s,n);return p.expenses.push(o),B(),await v.saveExpenseDB(o),m("A√±adido correctamente","success"),!0},le=async e=>{const s=p.expenses.findIndex(n=>n.id===e);s!==-1?(p.expenses.splice(s,1),B(),await v.deleteExpenseDB(e),m("Eliminado correctamente","success")):m("No se encontro el gasto con ID"+id,"success")},ue=async(e,s,n,o)=>{const i=p.expenses.findIndex(t=>t.id===e);p.expenses[i].name=s,p.expenses[i].amount=n,p.expenses[i].date=o,B();const a={name:s,amount:n,date:o,id:e};await v.udateExpenseDB(e,a),m("Editado correctamente","success")},B=async()=>{const e=p.budget.initial-p.expenses.reduce((s,n)=>s+n.amount,0);p.budget.remaining=e,await v.saveBudgetDB(p.budget)},pe=()=>p.expenses,w={state:p,initStore:ie,loadStore:re,addBudget:ce,calculateBudget:B,addExpense:de,editExpense:ue,deleteExpense:le,getExpenses:pe},fe=`\r
\r
<div class="layout">\r
    <div id="layout1"class="layout__section gasto-container">\r
        \r
    </div>\r
\r
    <div id="layout2" class="layout__section layout__section--secondary lista-container">\r
        \r
    </div>\r
    \r
</div>\r
<div class="insertar-alerta">\r
\r
</div>`,me=`<div class="presupuesto__total sombras">\r
    <p>Presupuesto: <span id="total">0</span>‚Ç¨</p>\r
</div>\r
<div class="presupuesto__restante sombras">\r
    <p>Restante: <span class="green" id="restante">0</span>‚Ç¨</p>\r
</div>`,be=async e=>{const s=document.createElement("DIV");s.className="presupuesto",s.innerHTML=me,e.append(s)},ge=`<h2 class="lista__title">Gastos</h2>\r
<div class="lista__items" id="gastos">\r
\r
\r
\r
</div>`,he=e=>{const s=document.createElement("DIV");s.className="lista sombras-fixed",s.innerHTML=ge,e.append(s)},ye=`<h2 class="gasto__title">A√±ade tus gastos aqu√≠</h2>\r
<form class="gasto__form" id="agregar-gasto" action="#">\r
    \r
    <div class="gasto__field">\r
        <label for="gasto"></label>\r
        <input class="gasto__input" type="text" id="gasto" placeholder="Nombre Gasto">\r
    </div>\r
    <div class="gasto__field">\r
        <label for="cantidad"></label>\r
        <input class="gasto__input" type="text" id="cantidad" placeholder="Cantidad en ‚Ç¨">\r
    </div>\r
    <div class="gasto__field">\r
        <label for="fecha"></label>\r
        <input class="gasto__input" type="date" id="fecha" name="fecha">\r
    </div>\r
    <input style="display: none;" type="text" id="id" name="id">\r
    <button class="gasto__button" type="submit">Agregar</button>\r
</form>`,ve=async e=>{const s=document.createElement("DIV");s.className="gasto sombras",s.innerHTML=ye,e.append(s)},xe=`<div class="info__content sombras">\r
    <div class="info__text" style="border: none;">\r
        <div id="info" class="info__paragraph">\r
            <p>üß†</p>\r
        </div>\r
    </div>\r
</div>\r
<div class="info__content sombras">\r
    <div class="info__text" style="border: none;">\r
        <div id="deleteDB" class="info__paragraph">\r
            <p>üóëÔ∏è</p>\r
        </div>\r
    </div>\r
</div>\r
<div class="info__content sombras">\r
    <div class="info__text" style="border: none;">\r
        <div id="descargar" class="info__paragraph">\r
            <p>üíæ</p>\r
        </div>\r
    </div>\r
</div>`,we=`<div class="layout__modal">\r
    <button class="button-modal">X</button>\r
    <div class="modal__conten_info">\r
        <p class="modal__info__description">Este ejercicio me ha servido para mejorar mis habilidades en JavaScript, HTML/CSS e IndexedDB, adem√°s de trabajar en el dise√±o de una interfaz interactiva y en la gesti√≥n de datos locales, con el objetivo de seguir mejorando como\r
            desarrollador web.</p>\r
    </div>\r
    <div class="modal__conten_info">\r
        <p>üóëÔ∏è: Sirve para eliminar la base de datos, se volver√° a cargar la web y te pedira presupuesto.</p>\r
    </div>\r
    <div class="modal__conten_info">\r
        <p>üíæ: Sirve para exportar tu presupuesto y gastos en un archivo JSON a parte.</p>\r
    </div>\r
    <div class="modal__conten_info footer">\r
        <p>¬© 2025 MDeosdad<br> Todos los derechos reservados.</p>\r
    </div>\r
</div>`,_e=async e=>{const s=document.createElement("DIV");s.className="info",s.id="presupuesto",s.innerHTML=xe,e.append(s);const n=document.createElement("DIV");n.className="modal_info",n.id="modal_info",n.innerHTML=we,e.append(n);const o=document.querySelector(".modal_info"),i=document.querySelector("#info"),a=document.querySelector(".button-modal");i.onclick=function(){o.style.display="flex",setTimeout(()=>o.classList.add("show"),300)},a.onclick=function(){o.classList.remove("show"),setTimeout(()=>o.style.display="none",300)}},Ee=`<div class="modal__content">\r
    <form>\r
    <h2 class="modal__title">¬øCu√°l es tu presupuesto?</h2>\r
    <input class="modal__input" type="text" id="presupuesto-input" placeholder="Ingresa tu presupuesto" required>\r
    <button class="modal__button" id="presupuesto-btn">Aceptar</button>\r
    </form>\r
</div>`;let y;const Le=()=>{y==null||y.classList.remove("ocultar")},Se=()=>{y==null||y.classList.add("ocultar")},Ne=async e=>{y=document.createElement("DIV"),y.className="modal modal--presupuesto ocultar",y.id="modal-presupuesto",y.innerHTML=Ee,e.append(y)},k={initial:"#total",remaining:"#restante"},De=async()=>{const e=document.querySelector(k.initial),s=document.querySelector(k.remaining),{initial:n,remaining:o}=w.state.budget;e.textContent=n,s.textContent=o,s.classList.remove("green","orange","red"),o<=n/4?s.classList.add("red"):o<=n/2?s.classList.add("orange"):s.classList.add("green")},Be=(e,s,n="presupuesto.json")=>{const o={presupuesto:{inicial:e.initial,restante:e.remaining},gastos:s.map(({id:r,name:g,amount:u,date:d})=>({nombre:g,cantidad:u,fecha:d}))},i=JSON.stringify(o,null,2),a=new Blob([i],{type:"application/json"}),t=document.createElement("a");t.href=URL.createObjectURL(a),t.download=n,t.click(),URL.revokeObjectURL(t.href)},Te={list:"#gastos"},qe=async e=>{const s=document.querySelector(Te.list);if(s)for(;s.firstChild;)s.removeChild(s.firstChild);e.forEach(n=>{const{name:o,amount:i,date:a,id:t}=n,r=document.createElement("div");r.className="lista__item",r.dataset.id=t,r.innerHTML=`
                <div class="lista__cantidad">
                    <p class="lista__moneda"><span class="lista__dinero">${i}</span>
                    ‚Ç¨</p>
                </div>
                <div class="lista__info">
                    <p class="lista__nombre">${o}</p>
                    <p class="lista__fecha">${a}</p>
                </div>
                <div class="lista__acciones">
                    <button class="button-red" data-id="${t}">X</button>
                    <button class="button-edit" data-id="${t}">üñâ</button>
                </div>
            `,s.appendChild(r)})},C={number:"Presupuesto tiene que ser un n√∫mero",positive:"Presupuesto tiene que ser superior a 0"},Ce=e=>!e||isNaN(e)?m(C.number,"error"):e<=0?m(C.positive,"error"):!0,I={modal:"#modal-presupuesto",input:"#presupuesto-input"},Me=async e=>{if(e)await w.loadStore(),D();else{Le();const s=document.querySelector(I.modal),n=document.querySelector(I.input),o=s.querySelector("form");o.addEventListener("submit",async i=>{i.preventDefault(),console.log("2.2-Comprobar presupuesto");const a=Number(n.value),t=Ce(a);await w.addBudget(a),t&&(Se(),o.reset(),D())})}},L={error_all:"Todos los campos son obligatorios",not_number:"Nombre no puede ser un n√∫mero",number:"Cantidad tiene que ser un n√∫mero",positive:"Cantidad tiene que ser superior a 0"},Oe=(e,s,n)=>!e&&!s&&!n?m(L.error_all,"error"):Number(e)?m(L.not_number,"error"):isNaN(s)?m(L.number,"error"):s<=0?m(L.positive,"error"):!n||!e?m(L.error_all,"error"):!0,x={leftLayout:"#layout1",rightLayout:"#layout2",expensesList:"#gastos",form:"#agregar-gasto",name:"#gasto",amount:"#cantidad",date:"#fecha",btnSubmit:".gasto__button",deleteDB:"#deleteDB",download:"#descargar"},ke=async e=>{let s=null;(()=>{const c=document.createElement("div");c.innerHTML=fe,e.append(c);const l=e.querySelector(x.leftLayout),b=e.querySelector(x.rightLayout);ve(l),be(l),_e(l),he(b),Ne(e)})(),await w.initStore();const n=e.querySelector(x.form),o=e.querySelector(x.name),i=e.querySelector(x.amount),a=e.querySelector(x.date),t=e.querySelector(x.btnSubmit),r=await v.getBudgetDB();await Me(r),n.addEventListener("submit",async c=>{c.preventDefault();const l=o.value,b=Number(i.value),_=a.value;Oe(l,b,_)&&(s?(await w.editExpense(s,l,b,_),s=null,t.textContent="Agregar Gasto"):await w.addExpense(l,b,_),n.reset(),D())}),e.querySelector(x.expensesList).addEventListener("click",async c=>{if(c.target.classList.contains("button-red")&&(await w.deleteExpense(c.target.dataset.id),D()),c.target.classList.contains("button-edit")){const l=c.target.dataset.id,{name:b,amount:_,date:S}=await v.getExpenseDB(l);o.value=b,i.value=_,a.value=S,s=l,t.textContent="Editar"}}),e.querySelector(x.deleteDB).addEventListener("click",async()=>{window.confirm("¬øEst√°s seguro de que quieres eliminar la base de datos? Esta acci√≥n no se puede deshacer. Se recargara la web automaticamente.")?await v.deleteDatabase():console.log("La eliminaci√≥n fue cancelada.")}),document.querySelector(x.download).addEventListener("click",async()=>{try{const c=w.state.budget,l=w.state.expenses;c&&l&&l.length>0?Be(c,l):m("No hay datos disponibles para exportar.","error")}catch{m("Error al obtener los datos para CSV.","error")}})},D=()=>{De();const e=w.getExpenses();qe(e)},Ie=document.querySelector("#app");ke(Ie);
